<%= content_for :title, "Processing Payment" %>

<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-fuchsia-50 flex items-center justify-center py-12 px-4">
  <div class="max-w-md w-full">
    <!-- Processing Card -->
    <div class="bg-white rounded-3xl shadow-2xl shadow-indigo-200/50 overflow-hidden">
      <!-- Animated Header -->
      <div class="bg-gradient-to-r from-indigo-600 via-purple-600 to-fuchsia-600 px-8 py-10 text-center relative overflow-hidden">
        <!-- Animated Background -->
        <div class="absolute inset-0 opacity-20">
          <div class="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,white_0%,transparent_50%)]"></div>
          <div class="animate-pulse absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
        </div>
        
        <!-- Processing Animation -->
        <div class="relative">
          <div class="w-24 h-24 mx-auto mb-6 relative">
            <!-- Outer Ring -->
            <div class="absolute inset-0 rounded-full border-4 border-white/30"></div>
            <!-- Spinning Ring -->
            <div class="absolute inset-0 rounded-full border-4 border-transparent border-t-white animate-spin"></div>
            <!-- Inner Circle -->
            <div class="absolute inset-2 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
            </div>
          </div>
          
          <h1 class="text-2xl font-bold text-white mb-2">Processing Your Payment</h1>
          <p class="text-white/80 text-sm">Please wait while we securely process your transaction</p>
        </div>
      </div>
      
      <!-- Progress Steps -->
      <div class="px-8 py-8">
        <div class="space-y-4">
          <!-- Step 1: Verifying -->
          <div class="flex items-center gap-4 p-4 bg-green-50 rounded-xl border border-green-100" id="step-1">
            <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div class="flex-1">
              <p class="font-medium text-green-800">Verifying payment details</p>
              <p class="text-sm text-green-600">Your card has been verified</p>
            </div>
          </div>
          
          <!-- Step 2: Processing -->
          <div class="flex items-center gap-4 p-4 bg-indigo-50 rounded-xl border border-indigo-100 animate-pulse" id="step-2">
            <div class="w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-white animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
            </div>
            <div class="flex-1">
              <p class="font-medium text-indigo-800">Processing payment</p>
              <p class="text-sm text-indigo-600">Securely charging your account...</p>
            </div>
          </div>
          
          <!-- Step 3: Completing -->
          <div class="flex items-center gap-4 p-4 bg-gray-50 rounded-xl border border-gray-200" id="step-3">
            <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center flex-shrink-0">
              <span class="text-white font-bold">3</span>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-500">Completing order</p>
              <p class="text-sm text-gray-400">Creating your order...</p>
            </div>
          </div>
        </div>
        
        <!-- Security Notice -->
        <div class="mt-8 flex items-center justify-center gap-2 text-sm text-gray-500">
          <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
          </svg>
          <span>256-bit SSL encryption protects your data</span>
        </div>
        
        <!-- Warning -->
        <div class="mt-6 p-4 bg-amber-50 rounded-xl border border-amber-100">
          <div class="flex gap-3">
            <svg class="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
            </svg>
            <div>
              <p class="text-sm font-medium text-amber-800">Please don't close this page</p>
              <p class="text-xs text-amber-600 mt-1">Closing this page may interrupt your payment process</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Order Info -->
    <div class="mt-6 text-center">
      <p class="text-sm text-gray-500">
        Order Total: <span class="font-semibold text-gray-900"><%= number_to_currency(@total || 0) %></span>
      </p>
    </div>
  </div>
</div>

<script>
// Simulate payment processing animation
document.addEventListener('DOMContentLoaded', function() {
  const steps = [
    { id: 'step-1', delay: 0 },
    { id: 'step-2', delay: 1500 },
    { id: 'step-3', delay: 3000 }
  ];
  
  // This would typically redirect after payment processing
  // For demo purposes, we'll just animate the steps
  setTimeout(function() {
    const step2 = document.getElementById('step-2');
    step2.classList.remove('animate-pulse', 'bg-indigo-50', 'border-indigo-100');
    step2.classList.add('bg-green-50', 'border-green-100');
    step2.querySelector('.w-10').classList.remove('bg-indigo-500');
    step2.querySelector('.w-10').classList.add('bg-green-500');
    step2.querySelector('.w-10 svg').classList.remove('animate-spin');
    step2.querySelector('.w-10').innerHTML = '<svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
    step2.querySelector('.font-medium').classList.remove('text-indigo-800');
    step2.querySelector('.font-medium').classList.add('text-green-800');
    step2.querySelector('.text-sm').classList.remove('text-indigo-600');
    step2.querySelector('.text-sm').classList.add('text-green-600');
    step2.querySelector('.text-sm').textContent = 'Payment successful!';
    
    // Animate step 3
    const step3 = document.getElementById('step-3');
    step3.classList.remove('bg-gray-50', 'border-gray-200');
    step3.classList.add('bg-indigo-50', 'border-indigo-100', 'animate-pulse');
    step3.querySelector('.w-10').classList.remove('bg-gray-300');
    step3.querySelector('.w-10').classList.add('bg-indigo-500');
    step3.querySelector('.w-10').innerHTML = '<svg class="w-5 h-5 text-white animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>';
    step3.querySelector('.font-medium').classList.remove('text-gray-500');
    step3.querySelector('.font-medium').classList.add('text-indigo-800');
    step3.querySelector('.text-sm').classList.remove('text-gray-400');
    step3.querySelector('.text-sm').classList.add('text-indigo-600');
    step3.querySelector('.text-sm').textContent = 'Creating your order...';
  }, 2000);
});
</script>
